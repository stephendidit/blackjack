<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Blackjack Attempt</title>
<!-- <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" /> -->
<!-- <link rel="stylesheet" type="text/css" href="css/main.css" /> -->
</head>
<body>

* 1. Build Deck // built as buildDeck()
* 2. Shuffle Deck // built as shuffle()
* 3. Place Wager
  * wager = wager1
4. Deal one card to player (face up)
5. Deal one card to dealer (face down)
6. Deal one card to player (face up)
7. Deal one card to dealer (face up)

8. Player Plays Hands

* 9. def hit() // built as hit()
   * end

def play()
  hand_i = 1
  hands = [
    {
      number => hand_i,
      played => false,
      wager => wager
    }
  ]
  hands.each do |hand|
    while hand[0] == "unplayed"
      options = ["stay", "hit"]
      if 2 identical cards
        options << split
      end
      if first play
        options << double
      end
      case options
      when "stay"
        hand[0] = "played"
      when "hit"
        hit() // this doesn't exist for player yet
        hand[0] = "played" if hand > 21
      when "split"
        hand_i += 1
        hands << {number => hand_i, played => false, wager => wager}
      when "double"
        hand[2] *= 2
      end // case options
    end // if hand unplayed
  end // hands each
end // def play



Dealer Hits Until Score of >= 17

Resolve Wagers
def resolve
  hands.each
    if hand == dealer
      push (player keeps original wager)
    else
      if hand <= 21
        if dealer > 21
          hand wins
        elsif hand > dealer
          hand wins
        elsif hand > player
          house wins
      elsif hand > 21
        house wins
      end
    end
  end
end

Discard Used Cards
Shuffle Remaining Cards and begin again


    <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.2/js/tether.min.js"></script>
    <script src="https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/js/bootstrap.js" crossorigin="anonymous"></script>
    <script src="https://use.fontawesome.com/343cc4bbfb.js"></script>
    <script>


    // GLOBAL //
    symbols = ['h','s','c','d'];
    values = [['a',1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[8,8],[9,9],[10,10],['j',10],['q',10],['k',10]];
    var deck = []
    
    player = []

    // CREATE DEALER

    function Deck(){
      console.log("New deck.")
      
      this.build = function(){
        var i = 0
        symbols.forEach(function (s){ // for each symbol
          values.forEach(function(v){ // for each value
            deck[i] = []; // make an element that's also an array for the new card, in the position of the current index
            deck[i][0] = s + v[0]; // the the new element/array's first element = symbol + value[0]
            deck[i][1] = v[1]; // the new element/array's second element = value[1]
            i++; // increase the index
          });
        });  
        console.log("Deck built.")
      } // end build

      this.shuffle = function(){ // https://github.com/coolaj86/knuth-shuffle , http://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array
      
        var currentIndex = deck.length//, temporaryValue, randomIndex;
        // While there remain elements to shuffle...
        while (0 !== currentIndex) {

          // Pick a remaining element...
          randomIndex = Math.floor(Math.random() * currentIndex);
          currentIndex -= 1;

          // And swap it with the current element.
          temporaryValue = deck[currentIndex];
          deck[currentIndex] = deck[randomIndex];
          deck[randomIndex] = temporaryValue;
        } // end while
        console.log("Shuffled deck.")
      } // end shuffle
    } // end Deck
    

    function Dealer(){
      this.dealer_hand = [];
      this.draw = function(){
        this.dealer_hand.push(hit(deck));   
      }
    }

    // HIT //

    function hit(deck){
      return card = deck.pop(); // removes the last card in the array and returns it
    }


    // GET WAGER //

    wager = 25;



    // TESTS

    my_deck = new Deck();
    my_deck.build();
    // buildDeck();
    
    my_deck.shuffle();

    card = hit(deck);
    // console.log(card);

    var doug = new Dealer();
    
    my_deck.shuffle();
    doug.draw();

    console.log("Dealer hand:")
    console.log(doug.dealer_hand);

    
    </script>



    // dealer_hand = [["c10",10],["a",1],["c10",10]]

    


    var sometotal = 0

    function total(player){
      var total = 0
      var aces = 0
      doug.dealer_hand.forEach(function (element){
        if (element[1] == 1) {
          aces += 1;
        } else {
          total += element[1];
        }
      });
      while (aces > 0){
        if ((total + 11) > 21){
          total +=1;
        } else {
          total += 11;
        }
        aces--;
      }

      // console.log(String(dealer_hand));
      // console.log( "total: " + total )
      sometotal = total;
      return "total: " + total;
    }

    console.log(sometotal);
    while (sometotal <= 17) {
      dealerDraw();
      total(doug.dealer_hand); 
    }
    console.log("finally is..." + total(doug.dealer_hand));
    console.log("the hand is..." + String(doug.dealer_hand))

</body>
</html>